<?php

use yii\helpers\Html;


for ($i = 0; $i < count($model); $i++) {

	$char_color[$i] = strlen($model[$i]->coche->color);

	if ($char_color[$i] < 3) {
		$color[$i] = 'N/D';
	} else {
		$color[$i] = $model[$i]->coche->color;
	}

	if (empty($model[$i]->coche->matricula)) {
		$model[$i]->coche->matricula = 'N/D';
	}

	if (empty($model[$i]->coche->marca)) {
		$model[$i]->coche->marca = 'N/D';
	}

	if (!empty($model[$i]->coche->modelo)) {
		$model[$i]->coche->modelo = substr($model[$i]->coche->modelo, 0, 7);
	}

	if (empty($model[$i]->cliente->movil)) {
		$model[$i]->cliente->movil = 'N/D';
	}

	if ($model[$i]->medio_reserva === 1) {
		$medio = 'phone-24.png';
	}
	if ($model[$i]->medio_reserva === 2) {
		$medio = 'tags.png';
	}
	if ($model[$i]->medio_reserva === 3) {
		$medio = 'browser.svg';
	}
	if ($model[$i]->medio_reserva === 4) {
		$medio = 'afiliado.png';
	}
}

?>

<?php
for ($i = 0; $i < count($model); $i++) { ?>

	<div style="margin-top: 1cm;font-size: 17px; font-weight: bolder; font-family: sans-serif;"><b><?= $model[$i]->nro_reserva ?></b></div>

	<div style="margin-top: 0.5cm;">
		<?= Html::img('@web/images/' . $medio, ['style' => ['width' => '20px']]); ?>
	</div>

	<div style="margin-top: -1.6cm; font-size: 17px; font-weight: bolder; font-family: sans-serif;">
	</div>

	<div align="right" style="text-transform: uppercase; font-size: 12px">Importe : <b><?= $model[$i]->monto_total ?> €</b></div>
	<div align="right" style="text-transform: uppercase; font-size: 12px">Teléfono : <b><?= $model[$i]->cliente->movil ?></b></div>

	<div align="center">
		<?= Html::img('@backend/web/images/ticket_logo.png', ['style' => ['width' => '4cm', 'height' => '3.3cm', 'margin' => '30px 0']]); ?>
	</div>

	<div align="right" style="font-size: 8px; margin-right: .7cm; margin-top: -0.8cm;">
		CIF. B88537345
	</div>

	<hr style="margin: 15px 0px 0px 0px">

	<table style="margin-top: 15px; margin-left: -3px;">
		<tr>
			<td colspan="2" align="center" style="width: 7cm; text-transform: uppercase;">
				Matrícula
				<div align="center" style="width: 7cm; font-size: 36px"><?= $model[$i]->coche->matricula ?></div>
			</td>
		</tr>
		<tr>
			<td colspan="2" align="center" style="width: 3.5cm; text-transform: uppercase; padding-top: 10px">
				Marca - Modelo
				<div align="center" style="width: 3.5cm; font-size: 20px"><?= $model[$i]->coche->marca . ' ' . $model[$i]->coche->modelo ?></div>
			</td>
		</tr>

		<tr>
			<td colspan="2" align="center" style="width: 7cm; text-transform: uppercase; padding-top: 15px">
				Fecha de Entrada
			</td>
		</tr>

		<tr>
			<td colspan="2" align="center" style="width: 7cm; text-transform: uppercase;">
				<div align="center" style="font-size: 22px"><?= $model[$i]->hora_entrada ?></div>
			</td>
		</tr>

		<tr>
			<td colspan="2" align="center" style="width: 7cm; text-transform: uppercase;">
				<div align="center" style="font-size: 22px"><?= date('d/m/Y', strtotime($model[$i]->fecha_entrada)) ?></div>
			</td>
		</tr>

		<tr>
			<td colspan="2" align="center" style="width: 7cm; text-transform: uppercase; padding-top: 15px">
				Fecha de Salida
			</td>
		</tr>

		<tr>
			<td colspan="2" align="center" style="width: 7cm; text-transform: uppercase;">
				<div align="center" style="font-size: 22px"><?= $model[$i]->hora_salida ?></div>
			</td>
		</tr>

		<tr>
			<td colspan="2" align="center" style="width: 7cm; text-transform: uppercase;">
				<div align="center" style="font-size: 22px"><?= date('d/m/Y', strtotime($model[$i]->fecha_salida)) ?></div>
			</td>
		</tr>

	</table>

	<hr style="margin: 6px 0px">

	<?php if ($contS[$i] > 0) { ?>
		<div style="height: 3cm">
			<b>INCLUYE:</b><br />
			<?php for ($l = 0; $l < count($servicios[$i]); $l++) {
				if ($servicios[$i][$l]->servicios->fijo == 2) { ?>
					<?= strtoupper($servicios[$i][$l]->servicios->nombre_servicio) ?><br />
			<?php }
			} ?>
		</div>
	<?php } else { ?>
		<div style="height: 3cm">
		</div>
	<?php } ?>


	<div>
		<?php if ($model[$i]['id_tipo_pago'] == 5) { ?>
			NOTA: LA RESERVA FUÉ PAGADA ONLINE
		<?php } ?>
		<hr style="margin: 0% 0% 2% 0%">
		<div style="font-size: 10px; text-transform: uppercase;">
			Asistencia en el Aeropuerto: <b>+34 604194861</b>
		</div>
		<div style="margin-top: 5px; text-transform: uppercase; text-align: justify; font-size: 8px"><b>El parking no se hace responsable de la rotura de cristales. Daños mecanicos y objetos no declarados.</b></div>

		<div style="margin-top: 5px; text-transform: uppercase; text-align: justify; font-size: 8px">
			<b>El cliente debe tomar fotos/videos de su vehículo en la entrega del mismo en la terminal del aeropuerto para poder reclamar cualquier desperfecto en la recogida a su regreso.</b>
		</div>

		<div style="margin-top: 5px; text-align: center; font-size: 12px"><b>Gracias por Preferirnos</b></div>
	</div>
<?php }
?>